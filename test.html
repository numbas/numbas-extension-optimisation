<!doctype html>
<html>
<head>
		<!-- numbas stuff -->
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/numbas.js" charset="utf-8"></script>
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/jme.js" charset="utf-8"></script>
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/jme-builtins.js" charset="utf-8"></script>
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/jme-display.js" charset="utf-8"></script>
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/math.js" charset="utf-8"></script>
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/util.js" charset="utf-8"></script>

		<!-- R.js - localisation -->
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/R/R.js"></script>
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/locales/en-GB.js"></script>

		<!--JQuery scripts-->
		<script charset="UTF-8" type="text/javascript" src="/numbas/dev/runtime/scripts/jquery/jquery.js"></script>

		<script src="optimisation.js"></script>

		<link rel="stylesheet" href="/numbas/dev/themes/default/files/resources/exam.css"></link>
		<link rel="stylesheet" href="optimisation.css"></link>

</head>
<body>
		<script>
			Numbas.queueScript('base',[],function() {});
			Numbas.queueScript('go',['jme','extensions/optimisation/optimisation.js'],function() {
				var optimisation = Numbas.extensions.optimisation;
				window.show = function(a) {
					console.log(a.map(function(r){return r.join('\t')}).join('\n'));
				}
				function matrix(l) {
					l.rows = l.length;
					l.columns = l[0].length;
					return l;
				}

				var result = optimisation.nw_corner([359,476,435],[481,436,150]);
				$('body').append('<h1>NW corner</h1>');
				$('body').append(optimisation.nw_corner_display(result.frames));
				var result = optimisation.minimum_cost([610,341,281],[325,449,458],matrix([[1,1,1],[1,1,1],[1,1,1]]));
				$('body').append('<h1>Minimum cost</h1>');
				$('body').append(optimisation.minimum_cost_display(result.frames));

				$('body').append('<h1>Simplex</h1>');
				var result = optimisation.simplex([1,1,0,0],[[2,1,1,0,4],[1,2,0,1,3]]);
				$('body').append(optimisation.simplex_display(result.frames));

				$('body').append('<h1>Hungarian</h1>');
				var result = optimisation.hungarian([[1,2,3],[2,4,6],[3,6,9]]);
				$('body').append(optimisation.hungarian_display(result.frames));
				var result = optimisation.hungarian([[1,2,3,4,5],[2,4,6,3,2],[3,6,9,6,3],[4,6,3,2,6],[4,7,4,8,2]]);
				$('body').append(optimisation.hungarian_display(result.frames));

				$('body').append('<h1>Stepping stone</h1>');
				var assignments = matrix([[0,0,20,0],[17,0,0,21],[0,3,1,0]]);
				var costs = matrix([[8,4,1,5],[7,2,8,9],[5,2,4,9]]);
				var res = optimisation.stepping_stone(assignments,costs);
				$('body').append(optimisation.stepping_stone_display(res.frames));

				var assignments = matrix([[0,33,0,0],[0,13,38,0],[36,0,0,18]]);
				var costs = matrix([[7,4,4,6],[3,7,4,5],[2,8,5,4]]);
				var res = optimisation.stepping_stone(assignments,costs);
				$('body').append(optimisation.stepping_stone_display(res.frames));

				var assignments = matrix([[0,0,13,30],[0,9,0,0],[7,0,0,0]]);
				var costs = matrix([[7,9,2,1],[3,8,7,4],[1,5,4,1]]);
				var res = optimisation.stepping_stone(assignments,costs);
				$('body').append(optimisation.stepping_stone_display(res.frames));

				var assignments = matrix([[10,15,0,0],[0,0,0,6],[0,3,19,0]]);
				var costs = matrix([[9,4,2,5],[6,7,8,1],[7,3,2,2]]);
				var res = optimisation.stepping_stone(assignments,costs);
				$('body').append(optimisation.stepping_stone_display(res.frames));

				var assignments = matrix([[21,0,0,0],[11,51,0,0],[0,0,26,57]]);
				var costs = matrix([[2,5,1,6],[4,2,6,6],[4,6,1,4]]);
				var res = optimisation.stepping_stone(assignments,costs);
				$('body').append(optimisation.stepping_stone_display(res.frames));

				try {
					var assignments = matrix([[0,106,0,0],[34,26,0,79],[0,0,189,0]]);
					var costs = matrix([[3,1,3,2],[7,3,7,9],[2,4,2,4]]);
					var res = optimisation.stepping_stone(assignments,costs);
					$('body').append(optimisation.stepping_stone_display(res.frames));
				} catch(e) {
				}

				console.clear();

				var a = matrix([[0,0,0,0],[0,0,0,0],[0,0,0,0]]);
				var al = [[true,true,true,true],[true,true,false,false],[false,false,false,false]];
				var c = matrix([[1,2,3,4],[2,3,4,1],[3,4,1,2],[4,3,2,1]]);
				console.log(optimisation.assignment_is_optimal(a,al,c));

				console.clear();

				var c = matrix([[1,6,6,5],[9,4,1,2],[8,5,2,1],[1,8,2,5]]);
				try{
					optimisation.hungarian_phil(c);
				} catch(e) {
					console.log(e);
				}
				var c = matrix([[6,2,6,9],[3,7,8,5],[4,8,4,9],[2,7,6,1]]);
				try{
					optimisation.hungarian_phil(c);
				} catch(e) {
					console.log(e);
				}
			});
		</script>

		<style type="text/css">
		</style>
</body>
</html>
